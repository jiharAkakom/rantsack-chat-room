<!DOCTYPE html>
<html>
  <head>
    <title>Rantsack Chat Room</title>
    <script>
      function updatePage(){
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var text = String(JSON.parse(this.responseText));
            document.getElementById("messages").value = text;
          }
        };
        xhttp.open("GET", "/get_messages", true);
        xhttp.send();
      }
      setInterval(updatePage, 5000);
    </script>
  </head>
  <body>
    <h1>Rantsack Chat Room</h1>
    <p>Messages:</p>
    <textarea id="messages" readonly style="width:100%;" rows=10>
    </textarea>
    <hr>
    <form action="/index" method="post">
      Message: <input type="text" name="message" style="width:100%;"><br>
      <input type="submit" value="Send">
    </form> 
  </body>
</html>

